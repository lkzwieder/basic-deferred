var BasicDeferred=function(n){n=n||{verbose:!1,processOnFail:!1};var e,t,r=[],s=[],l=null,o=function(o,u,i){l--,o?r[i]=u[0]:(s[i]=u[0],n.processOnFail||(l=!1,r=[]),n.verbose&&console.log("The argument in the position number: "+i+" has failed")),l||(s.length&&(s=Array.prototype.slice.call(s),t.apply(null,s)),r.length&&(r=Array.prototype.slice.call(r),e.apply(null,r)))},u=function(n,e){e=Array.prototype.slice.call(e),n.apply(null,e)},i=function(n){return e=n,this},a=function(n){return e=n,this},c=function(n){return t=n,this};return{when:function(){for(var n=l=arguments.length;n--;)arguments[n].self.pos=n,arguments[n].self.resolve=function(){o(!0,arguments,this.pos)},arguments[n].self.reject=function(){o(!1,arguments,this.pos)};return{then:a,fail:c,done:i}},resolve:function(){u(e,arguments)},reject:function(){u(t,arguments)},promise:function(){return{done:i,fail:c,self:this}}}};